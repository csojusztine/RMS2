<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">




<div class="container">
  <form action="action_page.php" [formGroup] = "editForm"  novalidate>

      <div class="row">
        <div class="col-25">
          <label>Id</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">
              <input formControlName = "id" id="id" name= "id" class = "form-control" readonly>
            </div>
          </div>
        </div>
      </div>



      <div class="row">
        <div class="col-25">
          <label>Manufacturer</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">
              <input formControlName = "manufacturer" id= "manufacturer" name = "manufacturer" class = "form-control">
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label>Type</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">
              <input formControlName = "type" class = "form-control">
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label>Reparation price</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">
              <input formControlName = "reparation_price" class = "form-control">
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label>Reparation limit</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">
              <input formControlName = "reparation_limit" class = "form-control">
            </div>
          </div>
        </div>
      </div>
      
      
      
      <div class="row">
        <div class="col-25">
          <label>Description of failure</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">
              <textarea formControlName = "description_of_failure" class = "form-control"></textarea>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label>Status</label>
        </div>
        <div class="col-75">
          <div class = "form-group">
            <div class="input-group">

              <input formControlName = "status" class = "form-control" readonly>    
            </div>
          </div>
        </div>
      </div>
      <ng-container *ngIf = "!isDone()">
        <div class="row" >
          <div class="col-25">
            <label>Change To Done</label>
          </div>
          <div class="col-75">
            <label class="switch">
              <input type="checkbox" id = "toggleId">
              <div class="slider round"></div>
            </label>
          </div>
        </div>
      </ng-container>
      



      <div class="row">
        <div class="col-25">
          <label>New Works</label>
        </div>
        <div class="col-75">


            <ng-select class = "custom" [items]="allWorks" placeholder = "Search work..."
                bindLabel="description"
                [loading]="loading"
                [(ngModel)] = "selectedWork" [ngModelOptions]="{standalone: true}"
                [clearable] = "true"
                >
            </ng-select>
            <p>Selected work: {{selectedWork.description}}</p> 

            
            <button class="btn btn-primary btn-sm"  (click) = "addWork(selectedWork)">
              <i class="fa fa-plus-square"></i>Add work</button>
            
            <button class="btn btn-primary btn-sm"  (click) = "openContact(contentContact, selectedWork)">Open Contact</button>
            <br>

            <div class="alert alert-success alert-dismissible fade show" *ngIf = "successfully">
              <button type="button" class="close" data-dismiss="alert">
                <span aria-hidden="true"> &times; </span>
              </button>
              <strong>Success!</strong> Work added to this machine!
            </div>

            <h2>Added works to this machine: </h2> 
            <table class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th scope="col">Works</th>
                  <th scope="col">Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor = "let work of worksByMachine">
                  <th scope="row">{{work.description}}</th>
                  <td>
                    <button (click) = "deleteWorkFromMachine(work)">
                      <i class="fas fa-trash fa-2x" style="color:red"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>

        </div>     
      </div>
      
    
      <div class="button-row">
        <button mat-raised-button color="primary" (click) = "onSubmit()">Submit</button>
        
      </div>
  </form>
  
</div>

<ng-template #contentContact let-modal>
  <mat-toolbar>
    <span>{{"Contact customer"}}</span>
    <span class="fill-remaining-space"></span>
    <button class="btn-dialog-close" mat-stroked-button (click)="onClose()" tabIndex="-1"><mat-icon>clear</mat-icon></button>
  </mat-toolbar>
  
  <form  [formGroup]="contactForm" class="normal-form" novalidate>
     
    
    <mat-grid-list cols="2" rowHeight="300px">
      <mat-grid-tile>
        <div class="controles-container">
          <mat-form-field>
            <div class="form-group">
							 
                <input formControlName="manufacturer"  type = "text" 
                class="form-control"  name = "manufacturer"  matInput placeholder="Manufacturer*" readonly>   
              
            </div>
          </mat-form-field>

          <mat-form-field>
            <div class="form-group">
							
                <input type = "text"  formControlName="type" class="form-control"  id="type" name="type"   matInput placeholder="Type" readonly>
              
            </div>
          </mat-form-field>

          <mat-form-field>
            <div class="form-group">
							
                <input type = "text"  formControlName="description" class="form-control" name = "description" matInput    placeholder="Description of the work*" readonly>

          </div>
          </mat-form-field>
        </div>
      </mat-grid-tile>
      <mat-grid-tile>
        <div class="controles-container">
          <mat-form-field>
            <div class="form-group">
							
                <input type = "text" formControlName="price" class="form-control" name = "price" matInput   placeholder="Price of the work*" readonly>
              </div>

          </mat-form-field>

          <mat-form-field>
            <div class="form-group">

            <input type = "text"  formControlName="customers_email"  class="form-control" name = "customers_email"  matInput   placeholder="Customers e-mail*" readonly>

          </div>
          </mat-form-field>

          <mat-form-field>
            <textarea formControlName = "note" name = "note" class = "form-control" matInput placeholder="Note to customer*" ></textarea>
          </mat-form-field>
        </div>
      </mat-grid-tile>
    </mat-grid-list>

    <div class="button-row">
      <button mat-raised-button color="primary" (click) = "sendEmail()">Send</button>
    </div>
      
    </form>
  
</ng-template>
